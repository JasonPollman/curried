{"version":3,"sources":["index.js"],"names":["ARITY","noop","once","fn","amt","res","onced","apply","arguments","length"],"mappings":"8GAAA,8E,wEAQO,GAAMA,CAAAA,KAAK,CAAG,4BAAc,cAAd,CAAd,C,oBAMP,QAASC,CAAAA,IAAT,EAAgB,CAAE,CAwBH,QAASC,CAAAA,IAAT,CAAcC,CAAd,CAAkB,CAC/B,GAAkB,UAAd,QAAOA,CAAAA,CAAX,CAA8B,MAAOF,CAAAA,IAAP,CADC,GAG3BG,CAAAA,CAAG,CAAG,CAHqB,CAI3BC,CAJ2B,CAM/B,QAASC,CAAAA,CAAT,EAAiB,CACf,GAAU,CAAN,CAAAF,CAAJ,CAAa,MAAOC,CAAAA,CAAP,CAEbD,CAAG,GACHC,CAAG,CAAGF,CAAE,CAACI,KAAH,CAAS,IAAT,CAAeC,SAAf,CAAN,CAEA,MAAOH,CAAAA,CACR,CAEDC,CAAK,CAACN,KAAD,CAAL,CAA4B,CAAb,EAAAG,CAAE,CAACH,KAAD,CAAF,CAAiBG,CAAE,CAACH,KAAD,CAAnB,CAA6BG,CAAE,CAACM,MAA/C,CACA,MAAOH,CAAAA,CACR","sourceRoot":"packages/categories/function/once","sourcesContent":["import SafeSymbolFor from '@foldr/internal-symbol';\n\n/* eslint-disable require-jsdoc */\n\n/**\n * Used to track the arity of curried functions.\n * @type {SafeSymbol}\n */\nexport const ARITY = SafeSymbolFor('source-arity');\n\n/**\n * No operation\n * @returns {void}\n */\nfunction noop() {}\n\n/**\n * Creates a function that wraps and limits the invocation of `fn` to one call.\n * If fn is invoked more than once, it returns the result from the first invocation.\n *\n * @name once\n * @param {function} fn The function to \"once\"\n * @returns {any} Whatever is returned from the first call to `fn`.\n *\n * @arity 1\n * @category function\n * @publishdoc\n * @since v0.0.0\n * @export\n * @example\n *\n * import { once } from '@foldr/all';\n *\n * const onced = once(num => num * 4);\n *\n * onced(4); // => 16\n * onced(6); // => 16\n */\nexport default function once(fn) {\n  if (typeof fn !== 'function') return noop;\n\n  let amt = 0;\n  let res;\n\n  function onced() {\n    if (amt > 0) return res;\n\n    amt++;\n    res = fn.apply(this, arguments);\n\n    return res;\n  }\n\n  onced[ARITY] = fn[ARITY] >= 0 ? fn[ARITY] : fn.length;\n  return onced;\n}\n"]}